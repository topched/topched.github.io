!function(e){var t={init:function(t){var n={maxSize:-1,minSize:-1,spacing:5,duration:500,isVertical:!1,easing:void 0,autoResize:!0,behavior:null,delayMouseIn:0,delayMouseOut:0,selectOnClick:!0,deselectOnClick:!1,interval:2500,interactive:!0},s=e.extend(n,t);if(-1!==s.minSize&&-1!==s.maxSize)throw new Error("Kwicks options minSize and maxSize may not both be set");if(s.behavior&&"menu"!==s.behavior&&"slideshow"!==s.behavior)throw new Error("Unrecognized Kwicks behavior specified: "+s.behavior);return e.each(["minSize","maxSize","spacing"],function(e,t){var i=s[t];switch(typeof i){case"number":s[t+"Units"]="px";break;case"string":if("%"===i.slice(-1))s[t+"Units"]="%",s[t]=+i.slice(0,-1)/100;else{if("px"!==i.slice(-2))throw new Error("Invalid value for Kwicks option "+t+": "+i);s[t+"Units"]="px",s[t]=+i.slice(0,-2)}break;default:throw new Error("Invalid value for Kwicks option "+t+": "+i)}}),this.each(function(){e(this).data("kwicks",new i(this,s))})},expand:function(t,i){"object"==typeof t&&(i=t,t=void 0);var n=i&&i.delay||0;return this.each(function(){var i=e(this),s=i.data("kwicks");if(s)t="number"==typeof t?t:-1;else{if(!(s=i.parent().data("kwicks")))return;t=i.index()}var a=function(){if(t!==s.expandedIndex){var e=s.$panels,i=e[t]||null;s.$container.trigger("expand.kwicks",{index:t,expanded:i,collapsed:e.not(i).get(),oldIndex:s.expandedIndex,oldExpanded:s.getExpandedPanel(),isAnimated:s.isAnimated})}},o=s.$container.data("kwicks-timeout-id");o&&(s.$container.removeData("kwicks-timeout-id"),clearTimeout(o)),n>0?s.$container.data("kwicks-timeout-id",setTimeout(a,n)):a()})},expanded:function(){var e=this.first().data("kwicks");return e?e.expandedIndex:void 0},select:function(t){return this.each(function(){var i=e(this),n=i.data("kwicks");if(n)t="number"==typeof t?t:-1;else{if(!(n=i.parent().data("kwicks")))return;t=i.index()}if(t!==n.selectedIndex){var s=n.$panels,a=s[t]||null;n.$container.trigger("select.kwicks",{index:t,selected:a,unselected:s.not(a).get(),oldIndex:n.selectedIndex,oldSelected:n.getSelectedPanel()})}n.$container.kwicks("expand",t)})},selected:function(){var e=this.first().data("kwicks");return e?e.selectedIndex:void 0},resize:function(){return this.each(function(){var t=e(this),i=t.data("kwicks");i&&i.resize()})},destroy:function(){return this.each(function(){var t=e(this),i=t.data("kwicks");i&&i.destroy()})}};e.fn.kwicks=function(e){if(t[e])return t[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"!=typeof e&&e)throw new Error("Unrecognized kwicks method: "+e);return t.init.apply(this,arguments)},e.event.special.expand={_default:function(t,i){if("kwicks"===t.namespace){var n=e(t.target).data("kwicks");n&&n.expand(i.index)}}},e.event.special.select={_default:function(t,i){if("kwicks"===t.namespace){var n=e(t.target).data("kwicks");n&&n.select(i.index)}}};var i=function(t,i){var n=this;this.opts=i,this.onDestroyHandlers=[];var s=i.isVertical?"vertical":"horizontal";this.$container=e(t),this.$panels=this.$container.children();var a=["kwicks","kwicks-"+s];e.each(a,function(e){n.$container.hasClass(e)||(n.$container.addClass(e),n.onDestroy(function(){n.$container.removeClass(e)}))}),this.selectedIndex=this.$panels.filter(".kwicks-selected").index(),this.expandedIndex=this.selectedIndex,this.primaryDimension=i.isVertical?"height":"width",this.secondaryDimension=i.isVertical?"width":"height",this.calculatePanelSizes(),this.primaryAlignment=i.isVertical?"top":"left",this.secondaryAlignment=i.isVertical?"bottom":"right",this.$timer=e({progress:0}),this.isAnimated=!1,this.offsets=this.getOffsetsForExpanded(),this.updatePanelStyles(),this.initBehavior(),this.initWindowResizeHandler(),setTimeout(function(){n.updatePanelStyles()},100)};i.prototype.calculatePanelSizes=function(){var e=this.opts,t=this.getContainerSize(!0);this.panelSpacing="%"===e.spacingUnits?t*e.spacing:e.spacing;var i=this.$panels.length,n=this.panelSpacing*(i-1),s=t-n;this.panelSize=s/i,-1===e.minSize?(this.panelMaxSize=-1===e.maxSize?5>i?2*(t/3):t/3:"%"===e.maxSizeUnits?s*e.maxSize:e.maxSize,this.panelMinSize=(s-this.panelMaxSize)/(i-1)):-1===e.maxSize&&(this.panelMinSize="%"===e.minSizeUnits?s*e.minSize:e.minSize,this.panelMaxSize=s-this.panelMinSize*(i-1))},i.prototype.getOffsetsForExpanded=function(){for(var e=this.expandedIndex,t=this.$panels.length,i=this.panelSpacing,n=this.panelSize,s=this.panelMinSize,a=this.panelMaxSize,o=[0],r=1;t>r;r++)o[r]=-1===e?r*(n+i):e>=r?r*(s+i):a+s*(r-1)+r*i;return o},i.prototype.setStyle=function(){return e.support.style?function(e,t){e.setAttribute("style",t)}:function(e,t){e.style.cssText=t}}(),i.prototype.updatePanelStyles=function(){for(var e,t,i,n,s=this.offsets,a=this.$panels,o=this.primaryDimension,r=this.primaryAlignment,d=this.secondaryAlignment,l=this.panelSpacing,c=this.getContainerSize(),h=this._stylesInited?"":"position:absolute;",p=a.length;p--;)i=e,e=Math.round(s[p]),p===a.length-1?(t=c-e,n=d+":0;"+o+":"+t+"px;"):(t=i-e-l,n=r+":"+e+"px;"+o+":"+t+"px;"),this.setStyle(a[p],h+n);this._stylesInited||(this.$container.addClass("kwicks-processed"),this._stylesInited=!0)},i.prototype.initBehavior=function(){if(this.opts.behavior)switch(this.opts.behavior){case"menu":this.initMenuBehavior();break;case"slideshow":this.initSlideshowBehavior();break;default:throw new Error("Unrecognized behavior option: "+this.opts.behavior)}},i.prototype.initMenuBehavior=function(){var t=this,i=t.opts;this.addEventHandler(this.$container,"mouseleave",function(){t.$container.kwicks("expand",-1,{delay:i.delayMouseOut})}),this.addEventHandler(this.$panels,"mouseenter",function(){e(this).kwicks("expand",{delay:i.delayMouseIn})}),(i.selectOnClick||i.deselectOnClick)&&this.addEventHandler(this.$panels,"click",function(){var t=e(this),n=t.hasClass("kwicks-selected");n&&i.deselectOnClick?t.parent().kwicks("select",-1):!n&&i.selectOnClick&&t.kwicks("select")})},i.prototype.initSlideshowBehavior=function(){var t,i=this,n=this.$panels.length,s=0,a=!1,o=function(){a||(t=setInterval(function(){i.$container.kwicks("expand",++s%n)},i.opts.interval),a=!0)},r=function(){clearInterval(t),a=!1};o(),this.onDestroy(r),this.opts.interactive&&(this.addEventHandler(this.$container,"mouseenter",r),this.addEventHandler(this.$container,"mouseleave",o),this.addEventHandler(this.$panels,"mouseenter",function(){s=e(this).kwicks("expand").index()}))},i.prototype.initWindowResizeHandler=function(){if(this.opts.autoResize){var t=this,i=0,n=!1,s=e(window),a=function(e){e||(n=!1);var s=+new Date;if(20>s-i){if(n)return;return setTimeout(a,20-(s-i)),void(n=!0)}i=s,t.resize()};this.addEventHandler(s,"resize",a)}},i.prototype.getContainerSize=function(e){var t=this._containerSize;return(e||!t)&&(t=this._containerSize=this.$container[this.primaryDimension]()),t},i.prototype.getExpandedPanel=function(){return this.$panels[this.expandedIndex]||null},i.prototype.getCollapsedPanels=function(){return-1===this.expandedIndex?[]:this.$panels.not(this.getExpandedPanel()).get()},i.prototype.getSelectedPanel=function(){return this.$panels[this.selectedIndex]||null},i.prototype.getUnselectedPanels=function(){return this.$panels.not(this.getSelectedPanel()).get()},i.prototype.onDestroy=function(e){this.onDestroyHandlers.push(e)},i.prototype.addEventHandler=function(e,t,i){e.on(t,i),this.onDestroy(function(){e.off(t,i)})},i.prototype.destroy=function(){this.$timer.stop();for(var e=0,t=this.onDestroyHandlers.length;t>e;e++)this.onDestroyHandlers[e]();this.$panels.attr("style","").removeClass("kwicks-expanded kwicks-selected kwicks-collapsed"),this.$container.removeClass("kwicks-processed").removeData("kwicks")},i.prototype.resize=function(){this.getContainerSize()!==this.getContainerSize(!0)&&(this.calculatePanelSizes(),this.offsets=this.getOffsetsForExpanded(),this.isAnimated?this._dirtyOffsets=!0:this.updatePanelStyles())},i.prototype.select=function(t){t!==this.selectedIndex&&(e(this.getSelectedPanel()).removeClass("kwicks-selected"),this.selectedIndex=t,e(this.getSelectedPanel()).addClass("kwicks-selected"))},i.prototype.expand=function(t){var i=this,n=this.expandedIndex,s=this.getExpandedPanel();if(-1===t&&(t=this.selectedIndex),t!==this.expandedIndex){e(this.getExpandedPanel()).removeClass("kwicks-expanded"),e(this.getCollapsedPanels()).removeClass("kwicks-collapsed"),this.expandedIndex=t,e(this.getExpandedPanel()).addClass("kwicks-expanded"),e(this.getCollapsedPanels()).addClass("kwicks-collapsed");var a=this.$timer,o=this.$panels.length,r=this.offsets.slice(),d=this.offsets,l=this.getOffsetsForExpanded();a.stop()[0].progress=0,this.isAnimated=!0,a.animate({progress:1},{duration:this.opts.duration,easing:this.opts.easing,step:function(e){i._dirtyOffsets&&(d=i.offsets,l=i.getOffsetsForExpanded(),i._dirtyOffsets=!1),d.length=0;for(var t=0;o>t;t++){var n=l[t],s=n-(n-r[t])*(1-e);d[t]=s}i.updatePanelStyles()},complete:function(){i.isAnimated=!1,i.$container.trigger("expand-complete.kwicks",{index:t,expanded:i.getExpandedPanel(),collapsed:i.getCollapsedPanels(),oldIndex:n,oldExpanded:s,isAnimated:!1})}})}}}(jQuery);